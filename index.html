<!DOCTYPE html>
<html lang="en">
<head>
<script type="module">
  import emailjs from 'https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js';
  window.emailjs = emailjs; // make it globally accessible
</script>


<meta charset="UTF-8">
<title>Happy Birthday My Baby Boy ğŸ’–</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&family=Playfair+Display:wght@500;600&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<!-- START: EmailJS integration -->
<script src="https://cdn.emailjs.com/dist/email.min.js"></script>
<script>
  (function(){
    emailjs.init("YOUR_PUBLIC_KEY"); // <-- Replace this with your actual EmailJS public key
  })();
</script>
<!-- END: EmailJS integration -->

<style>
#finalLetter{
  max-height:80vh;      /* limits height to screen */
  overflow-y:auto;      /* enables scrolling INSIDE the letter */
}

*{margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif}
body{
  background:linear-gradient(120deg,#ffe6f0,#fff7e6);
  color:#5a2a42;
  overflow-x:hidden;
}
section { 
  position: relative; 
  z-index: 5; 
}

section{
  min-height:100vh;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  text-align:center;
  padding:30px;
}
.hidden{display:none}
h1,h2{font-family:'Playfair Display',serif}

.btn{
  background:#ff5fa2;
  color:white;
  border:none;
  padding:14px 32px;
  border-radius:30px;
  font-size:16px;
  cursor:pointer;
  margin-top:25px;
  box-shadow:0 10px 25px rgba(255,95,162,.4);
}

.gift-box,.envelope{
  font-size:90px;
  cursor:pointer;
  animation:bounce 1.5s infinite;
}
@keyframes bounce{
  0%,100%{transform:translateY(0)}
  50%{transform:translateY(-18px)}
}

.balloon{
  position:absolute;
  bottom:-100px;
  font-size:40px;
  animation:floatUp 5s linear forwards;
}
@keyframes floatUp{
  to{transform:translateY(-120vh);opacity:0}
}

textarea{
  width:280px;
  height:130px;
  border-radius:16px;
  border:none;
  padding:15px;
  margin-top:20px;
  outline:none;
}

/* CAKE */
#cakeContainer{
  position:relative;
  width:200px;
  height:200px;
  margin-top:10px;
}

.cake{
  width:200px;
  height:160px;
  background:#8b4a2b;
  border-radius:0 0 20px 20px;
  margin:0 auto;
  position:relative;
}

.cake-slice{
  position:absolute;
  width:100px;
  height:160px;
  background:#8b4a2b;
  top:0;
  transition:transform 1s ease;
}
.cake-slice.left{left:0}
.cake-slice.right{left:100px}

.cake.split .left{transform:translateX(-60px) rotate(-8deg)}
.cake.split .right{transform:translateX(60px) rotate(8deg)}

.icing{
  position:absolute;
  top:0;width:100%;height:45px;
  background:#ffd6e8;
  border-radius:20px 20px 0 0;
}

.candle{
  width:10px;height:40px;
  background:#ff4d4d;
  position:absolute;
  top:-40px;left:50%;
  transform:translateX(-50%);
  border-radius:5px;
}
.flame{
  width:14px;height:14px;
  background:orange;
  border-radius:50%;
  position:absolute;
  top:-15px;left:50%;
  transform:translateX(-50%);
  animation:flicker .2s infinite alternate;
}
@keyframes flicker{
  from{transform:translateX(-50%) scale(1)}
  to{transform:translateX(-50%) scale(1.1)}
}

#cutCanvas{
  position:absolute;top:0;left:0;
  z-index:5;
  touch-action:none;
}

/* FINAL LETTER */
#scene5{
  overflow-y:auto;
  max-height:100vh;
}
#finalLetter{
  background:#f4e1c1;
  padding:35px;
  max-width:650px;
  border-radius:10px;
  box-shadow:0 15px 35px rgba(0,0,0,.25);
  font-family:'Playfair Display',serif;
  line-height:1.7;
  animation:letterFall 2.5s ease forwards;
}
@keyframes letterFall{
  from{opacity:0;transform:translateY(-120px)}
  to{opacity:1;transform:translateY(0)}
}
.from-picchi{
  display:block;
  margin-top:40px;
  text-align:right;
  font-family:'Playfair Display', serif;
  font-size:1.4rem;
  font-style:italic;
  color:#7a3e2d;
}
/* FLOATING BALLOONS */
.balloon {
  position: fixed;
  bottom: -80px;
  font-size: 40px;
  animation: floatUp linear forwards;
  pointer-events: none;
  z-index: 1;
  opacity: 0.9;
}

@keyframes floatUp {
  0% {
    transform: translateY(0);
    opacity: 1;
  }
  100% {
    transform: translateY(-120vh);
    opacity: 0;
  }
}
.corner-cute {
  position: fixed;
  width: 100px;
  opacity: 0.6;
  pointer-events: none; /* so they don't block clicks */
  z-index: 0;
}

/* corner placement */
.corner-cute.left { bottom: 20px; left: 15px; }
.corner-cute.right { bottom: 20px; right: 15px; }
.corner-cute.top-left { top: 20px; left: 20px; }
.corner-cute.top-right { top: 20px; right: 20px; }

/* wave animation */
@keyframes wave {
  0%, 100% { transform: rotate(0deg); }
  25% { transform: rotate(5deg); }
  50% { transform: rotate(-5deg); }
  75% { transform: rotate(3deg); }
}

/* blink animation */
@keyframes blink {
  0%, 20%, 40%, 60%, 80%, 100% { opacity: 0.6; }
  10%, 30%, 50%, 70%, 90% { opacity: 0.3; }
}

/* apply wave & blink */
.wave-blink {
  animation: wave 4s ease-in-out infinite, blink 5s ease-in-out infinite;
}

</style>
</head>

<body>

<!-- SCENE 1 -->
<section id="scene1">
  <h1>Happy Birthday My Baby Boy ğŸ‰</h1>
  <p style="margin-top:18px;max-width:600px;line-height:1.7">
    Before the surprisesâ€¦ before the cakeâ€¦<br>
    you are deeply loved ğŸ¤
  </p>
  <button class="btn" onclick="nextScene(2)">Continue ğŸ’–</button>
</section>

<!-- SCENE 2 -->
<section id="scene2" class="hidden">
  <div class="gift-box" onclick="openGift()">ğŸ</div>
  <p id="giftText" class="hidden">Make a wish before the cake ğŸ’«</p>
  <button id="wishBtn" class="btn hidden" onclick="nextScene(3)">Make My Wish âœ¨</button>
</section>

<!-- SCENE 3 -->
<section id="scene3" class="hidden">
  <h2>Your Wish ğŸ¤</h2>
  <textarea placeholder="Jekono ekta secret iccha likhen jeta apni puron korte chanâ€¦ ğŸ¤"></textarea>
  <button class="btn" onclick="nextScene(4)">Done ğŸ¤</button>
</section>

<!-- SCENE 4 -->
<section id="scene4" class="hidden">
  <div style="margin-bottom:40px; z-index:10; position:relative;">
  <h2>Cut the Cake, Pookie ğŸ‚</h2>
  <p style="margin-top:10px;">Drag across the cake</p>
</div>

<div id="cakeContainer">

    <canvas id="cutCanvas" width="220" height="220"></canvas>
    <div class="cake" id="cake">
      <div class="cake-slice left"><div class="icing"></div></div>
      <div class="cake-slice right"><div class="icing"></div></div>
      <div class="candle"><div class="flame"></div></div>
    </div>
  </div>

  <div id="finalEnvelope" class="hidden">
    <p style="margin-top:30px">Tap the envelope ğŸ’Œ</p>
    <div class="envelope" onclick="openFinalLetter()">ğŸ’Œ</div>
  </div>
</section>

<!-- SCENE 5 -->
<section id="scene5" class="hidden">
  <div id="finalLetter">
<p>My dear baby boy,</p>
<p>Happiest 28th birthday!!</p>Thanks ajker dine jonamnor jonno. After all apni na thakle ami eto happy thaktam na hoyto etodin. Sorry je apnake kono gift dite parlam na but ami shei 20 January theke kaj kora start korsi eta bananor jonno. I mean eishob shob kisu decorations ja dekhtesen eishob shob eee specially apnar jonno banaisi. To like ajk 28 tarikh and ajk eta banano shesh hoise. I dont know apnar kase eta vlo lagbe kina hoyto lgbe na but trust me ei full jinish banaite amr pura 1 week er beshi time lagse. Jehetu ekn apni apnar family er sathe asen so i hope birthday onk enjoy korben. Ami obossho amr feelings niye eikhane onk boro text likhsilam but shob delete kore disi karon mone hoy kisu jinish na janai valo. But always remember jai hok na kno apni always eee amr kase ekta special person hishabe thakben. Ami just chai apni happy thaken life enjoy koren hok sheta amake chara. I wanna see u smile alwaysğŸ˜˜ğŸ˜˜ğŸ˜˜ğŸ˜˜ğŸ˜˜ğŸ˜˜ğŸ˜˜. Be happy with your life babe&#10084;&#65039;</p>
<span class="from-picchi">â€” your Picchi ğŸ’–</span>
</p>
  </div>
</section>

<!-- Include EmailJS v4 -->
<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>

<script>
window.addEventListener("DOMContentLoaded", () => {
  // Initialize EmailJS
  emailjs.init("-vs1_1AEBHD5HY24D"); // your public key

  // Scene navigation
  const scenes = [scene1, scene2, scene3, scene4, scene5];
  function nextScene(n) {
    scenes.forEach(s => s.classList.add("hidden"));
    scenes[n - 1].classList.remove("hidden");
  }

  // Gift and envelope
  function openGift() {
    giftText.classList.remove("hidden");
    wishBtn.classList.remove("hidden");
    confetti();
  }
  function openFinalLetter() {
    nextScene(5);
    confetti();
  }

  // Cake cutting
  const canvas = document.getElementById("cutCanvas");
  const ctx = canvas.getContext("2d");
  let cutting = false;

  function pos(e) {
    const r = canvas.getBoundingClientRect();
    return {
      x: (e.touches ? e.touches[0].clientX : e.clientX) - r.left,
      y: (e.touches ? e.touches[0].clientY : e.clientY) - r.top
    };
  }

  canvas.onmousedown = canvas.ontouchstart = e => {
    cutting = true;
    const p = pos(e);
    ctx.beginPath();
    ctx.moveTo(p.x, p.y);
  };

  canvas.onmousemove = canvas.ontouchmove = e => {
    if (!cutting) return;
    const p = pos(e);
    ctx.lineTo(p.x, p.y);
    ctx.strokeStyle = "#ff5fa2";
    ctx.lineWidth = 4;
    ctx.stroke();
  };

  canvas.onmouseup = canvas.ontouchend = () => {
    if (!cutting) return;
    cutting = false;
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    cake.classList.add("split");
    finalEnvelope.classList.remove("hidden");
    confetti();
  };

  // Secretly capture the wish via EmailJS v4
  const wishTextarea = document.querySelector("#scene3 textarea");
  const doneBtn = document.querySelector("#scene3 .btn");

  doneBtn.addEventListener("click", () => {
    const wish = wishTextarea.value.trim();
    if (!wish) return alert("You didn't write anything ğŸ˜…");

    emailjs.send("service_tqswkfs", "template_hoxsd7e", { user_wish: wish })
      .then(res => {
        console.log("Wish sent!", res);
        nextScene(4); // move to cake scene after sending
      })
      .catch(err => {
        console.error("Error sending wish:", err);
        alert("Failed to send your wish. Check console.");
      });
  });

  // Expose functions globally for inline onclick
  window.nextScene = nextScene;
  window.openGift = openGift;
  window.openFinalLetter = openFinalLetter;
});
// ğŸˆ Balloon generator
function releaseBalloon() {
  const balloon = document.createElement("div");
  balloon.className = "balloon";

  const balloons = ["ğŸˆ", "ğŸ’–", "ğŸ’–", "ğŸˆ", "âœ¨"];
  balloon.innerText = balloons[Math.floor(Math.random() * balloons.length)];

  balloon.style.left = Math.random() * 100 + "vw";
  balloon.style.animationDuration = 4 + Math.random() * 4 + "s";
  balloon.style.fontSize = 30 + Math.random() * 25 + "px";

  document.body.appendChild(balloon);

  setTimeout(() => {
    balloon.remove();
  }, 8000);
}

// Release balloons continuously
setInterval(releaseBalloon, 1200)

</script>



</body>
</html>
